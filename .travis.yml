language: node_js
sudo: required
node_js:
  - '6.10'
  - '7.8'
cache:
  edge: true
  directories:
    - $(npm root -g)
    - node_modules
    - deep_modules
    - $(npm config get prefix)/bin
branches:
  only:
    - master
    - dev
    - stage
    - test
before_install:
  - cp bin/test/package.json .
after_success:
  - npm run coverage
after_script:
  - npm run remove-coverage
env:
  global:
    - DEEP_NO_INTERACTION=1
    - E2E_TESTING=none
    - MAJOR_VERSIONS=master
    - secure: 
        IzfJEvFKDzR5lbRSo6lxFSv5q/99WTYlQTC4bMWYZRFNK1rkfsdd/qhSAUCUT+hkyapf1bp1aER9Z79Yi8ivtQpQRmSuiZ+yb+15YP1jCYuVjPFnthVOOrgsxJyjspYxgE5FzATra7KwlrkGL57kIeEqj1aR03qKT4vGd4IVygUa+9FEjEEhztgeJXaMX4/GOjui1yYhXm464/LaQNcUpiNE3h3KDPIvFX6Wvfvwmccu3JILXWAR46/t69tWhs36b5p/MpdoDlXceF6ZCbRWX35P8eqXUPoi84zimjgoCnpvVwaAEUiu+3N+EqwrSGVbQWjFxHBqz2i2BNCT6xfPmU7ijie5bpdAjOdtz/9TKmjZk+nup/rd7wgvIAAuUYnFRUYGmuAjJf/D/kCb4SKmF86JzSaSmWqy+E8EoZSd2tpl041l0cStOhws8LEKRHZPzXHJhnqWrfNw94qbwnk83hPim382TmG37bED9v+HUFDA7IaAREKgmXNwJyU5sEdCFPhlNmgX1TrAi2dw0IeGNtez2IeQ+R+AYg2D/cZW44lIjFGSKyufNnByd4Tzu6ONgFof68hspGlJpMhe8Hw4qP7b6rvy2iI9atB7mSVPTf/kUSmWfRP/y30Rak0x2TAy+fu7tpfyxAZPgG4D8N0VvL69cDQ4kM9+oDaqQcqsjJg=
    - secure: 
        x3ti6r6naaXj9+fOGYoctYiIK10noKhEOmuy+jlDRmvLWQlU4AP+vBV1xhOWniECr/L9rAerNGg0We3hhEzdiPEJt1Re49/n3Y+ohApIOLaKuYPe4SJNsXQCyKNj9hxl31WppkpApOhaxDR7PR2ZybroPHDVB1ne0HT+mZA5iseHao2cProEGPZIfRKLLL9AcWImhWL5H94X1OiYdcXGqJBuDEC7POqrmoMPlPfDioEXSLLEbgP2R4/5LKvgDtSANOf9yBvdSjUKS2am0DKBu5GwfIGdF5CHJnyCp2arqL1Z7rH7AoV7IXgi9iSo37pNtjUlkLcdKGugEzQZfSbSkwqQwwDszMEU21KvGnLJ5yGIJWEvHKcimBP5TdGjbD9ssCAZ1qyPalsh/QKNHjJZTrzy8VIOzOcS/wGEJRgFz3Wcg9LOLIDDXxfHbB67xCslqs/Zas2udp3LEpkP3sGCMhqSf2nScjY3UUsYSsZfX42cqJ26SZkQnrs/oszMak/RmY1jeoLjivMNxGe44s8MX9++XGP0+1PWxh1i0TAWtkJOP7QQItfJHJ5lyWJbXcajBFO8x3822cB5XTdigJIWzb+J0ITFhYf348k6+pDVbhCPWiFfC8djHbEW7CbnQkL0V3KBoqSKN4cY/XCX2hCVnMgzAqOV3Ms7YYGd87HSqHw=
    - secure: 
        1Lw+sV5DZSJWsG8GR2Fm5FDBWMLd09ILpkT+1m7xF2M2zsmvszj4Zdw+RWa8+FskIJFL7SWgMR7KNqqGyTCr1Nlk8GTPBsci8fgAnoBgMuLwyDqFgX1YjCzCA1Zmr2/7kXa54VjgyGXfwr3/in+3y6UNsAr2FKOtTGidSGiD9wUaCPX6CNvqJbXAEaQE4/k7vx204NXbgcjE3qdOzaEWCp0HuEUTscwCoYr5Y6eWqf7N4kq3XWJv49uz2QuCpTnsOAIcDKfv1HXMasU59iApIHqGMPEss82mjNhVj7MZA3kp/hgV6ZeWa6GT0vaCo3v7ggBEyhNR28LrESyUp4SdWfVA2KdiOVYzmWkjT1v9uU04SVzLxSc817cUNJe6CWF/4K8siZ4BQN/CZiNsB5nwTismcgPAKkyXSY40FYAoILG6gMPd1/lARW18fqMEzukxq2QGXYZpJy3KvZGndObWn+5S3s6qMwqczR94GwlbCkvBQcTUuFxCFqUAjlbkuO/AifoTygTQ0+C7bHmXrVRsRRDnT9ygAZA8WQc3AnGZtynpfB9osIIu240KbIXh+2UZZaiDnxzJuC7NOVggg9fSo37OY7d/Cb/berwHTug76bvfksrV2BZN1MxrWvf7/Yb/ihAzBApTfaq2qErKxceWoExqSuj3pCWgZi3WEB83ujI=
    - secure: 
        PXZWQsNOvTsHCIwyg70In/hXyZJOLE282lkPv61ZX8ukeuZZNyBUp/XLBQRhwy89pqs3EqAnzm0DoVXzIzTmKkjYEeqo74rho6Jd3On3Os4NS3q53lRpotjGE3Ds+gfqzFTwyo9YCg4QV4x9pSKcscoZ6ppcepw6U/TRsrXuYQH4sH02Z3GPQy7XJFrbwYzxTtu6QUyN+QfHyOKTAdXJlWKyYznPVcPyxNUUbs9ByhQd0kcDDGijjR0nZY0bZaAVO0/SA2An1FeztVVNzOgS0o1c7haWIjY3gPNs8q0/l/Z56zs0NhMspeFiSz6ZwbAy+wIAaafsboPVHflwZXlANR0oIqeXG6VNdKuyrWT1XF/LEW/EZzQ38ThWsco82S26vkJoFG7rDsQhCD8Prx9ZmuJsuQ7T+7AKdQLuV41AQyWJSQH31vZELMHoP9gKLpaa9jOenwbCjN01nH4QK1w4pPPFHHyoaLN54dY8oJAOKVE7OMsvKbvbDalSeLrpyzIfZaXv+eDqFMQIUpkgQ2VDN7V+p2suVw58TQKC+hXztrASygopjUAB5fycHRTP3nKptpGe51W5QLI8lKRJU9ctkG36ICWUY9Um8nVKqK/E9HsFic6BOsaUhYrUhz/bPs8Lv1vorFQ29mzqvWMbjX80f0sT/c8mo5ybBbGJax4lyuo=
    - secure: 
        dSMaka5+TeVKyop+AOkdUFUzvzsc5GcUa6EbxVBvI5iP74RYUNleJ1hw7h4ZrxuyJerk+CfyPAOT5SAvwO6j6MXp17/XzRBaYppl8OkgbR5BrKBmrFNFU62yYLqwEmIFHm0eGPBVI11H5TiiEEmD4gUSaIjrbxAxM+lC4/ogoJ44VXi+evZ+oifn+y46GiqO6/OzsOYjQHI4D9LfBjAGu+hMIBBMGb1WSdQjX2seh0e3cq6ZY36tzkgErkj3tj7rRdf7qWF2DYBr5Vilm18pByiPQVJwpCD5S+IwVfMlFAi+MQQmkrp1JCBz/rpaWu+Ul3e4G8jgercwUdYHvcIYafR//y115xczgKk72TD1kVIju1KetTjsO3AXqFVp1tGa5ZrjBZ9VK1T53R1r2ZOiBWcMs5HEhT/V7nnSnmsruLFss40lvOBz4chD8nltuRH/V/QtANuemR0qQqUlEo5FH1e23GgEjeVVeY7pZWROShd0sswrZcsUMn1rpkbH6oh1T08toa1KDd8nW1ii7mePVzBjtidbkHsLsY0LYcd0YhJPeaWPzUCAjaj5VCxX0BCo6Ot2pmPTWxw4XEvtLgQFac7Ys++QK7+BEQmxrWZZQlW9hdf9xvjKBJl23JQ1/JYa7tN19/lTHEpBHOic0u972dsLPvMwHZIT1RR0C7SEBCo=
    - secure: 
        SZByoiXi4KHonmTCKuFQGJeH5QsnZe0gspUuMmWKDnYwJOY/RZX7KRSiJlop+Yfl9tjio3Yjxf0Ajv9yVGONSWfbCM01Lz+m7q49COAo2fe9p7RCo2gCmDIKpVYnXWjXIOfk2nILYUF/lzsu2NE9aHn6xhRIG4MNB7tV4HO+3CrtVU2lhtI06/laVagYZqoUk2ZQOtmnnQWCooDrpdOCZH7UFK9WU5v0EryUh/13I1KBH2dSqlcxKoAMyfxcwe94cTDv9/pYqXTw4QgwGffXhRjbA3ap7eYSM1KCdNjZlGv9/sQ5wX95YJk7LA8CCKHPt3XqOZF6mMc6gI1d/VsvdfDjgvty9KpiWknh+AWRhnNpkbQnVMllbdkUma2AEtKq15lbWcMR6PE8Phxqz8m2WCPlLqfvCVCg6NedLOtRGe3gTlGfqqwd+RmWT3+hC1imZFwyvUyMaM9jj4mYB3m9uvExgdOy0KWtV7t3eiWYLsdHwZ2lqCKjlYhD9G2yHLmE94hLi8X6YGkNf9MX7NZ5sPFCXZ5B692Op3is+8wRrdF5XV6Omz11HkbG74Yn5e++WnFwwWhh5IvBfeYEjgt/gmb5VvWxtKSzdZhMGDxh5KmHmUPT2CTgE9WGPxnKSorutiB4jCetWcALc3/i9Ya/7Ya7zvT59thnpH3dpEPrkbM=
    - secure: 
        OJo90v8tc8L3l+grLiFI1L2MTxRHaWt6JDW6nvTYq4mi4dZRpjU0URUEmfjIEW8JBtF3lwPVkV4CSnnXMcNM1oTv0dMefoU1JpE7uIOxHzm+eP38cKyMSjBdg9QhTxf25xiGUjBuiMoWd0NMckA09iHHeguYY/53rbCEXEUmljeHkvGlVqv+wlK2BuTYPtdttJPlW7bOub9THqhYgfbgCl9h237SAtKRfcB/HH919fbRwFVdg6wYWsbpkkFZ9sfIBX0B2DOwKfS8AH1PliXAoBSDZ85tb7EdG02bjZ0rn2GCTU/d/JVxkOayJDqNS+dpxuCb6UDowi1+Mq462erkrwj43eL6vpyOgXupYyDMQ4hrXu5OBAfPGtYpgybYWT+Q+kRO4F353TxbQSfhkya6cU+mDD8j78O6F0yPxTEWh0Caa0hfS8OnYEABG5IThRR1cSIwqdFnFGRLePoA1IBqDNF1wY7QB/7IUPXXlUoACG0VVzzbtsALQV06mD/btqliZrs79zEPg0oL6kCupdoOmY5qxAwxxxSTXegPwPOXa6fMrpU8DSRmpGKsWl1sKQNs0aMd+6DrRF2IsjlR21J+VthmwBtegTJi1ssV8AFo7Y6m/N7bkd+0rg5Pxl4EWsFn1dseRdFYhEiMf+ijvDW6jPClB600i3174KOr0LLm1EA=
    - secure: 
        Hku4Df6CIejF2fOFNBbwtlffOsSknoH8YytV3ERtWleD3wq8dHAEzWldDNpj4ygmGDXj8yo71OdWdHf2jVK0btNBx0L6vT8YEQobKmaJ5mtn+EC3tDCapcguQnHNAw3mG8nMN6zajvh1HKx0g73n9KkQM8Nx1Vt3PMPgFYwwZKmAi9KPjjeuolQeY+PXBrcAM4WL7a5DOqjM1Bh0F4v9a9rq+hBSPdo3AucUWZSWurwW5YGCU3ho8EBe/5cmWFK6rwbgzG6tB2kXjxPnInyyqmdZiRjKE1INhcstFxc7Xg4eFszLlrKO+5td8GRAc+LgN8QhZfTTX/eraI7cSNNslTD9mV+YW2R4XSYYqWCQTjM6ihnFAILPJSnRZ7r1HL4c5Y0gzjmwxvaJXjTyOBCdlaNnQyPifHr99HbRXy1FkJBCv4UbMwf2AtNWT68W5iozYYXu+3pmDC7g/puTVIl9D47mc6fU/VvFMmIh9PpEZsCec8Li/LA6U2emxezoWKHCUoWIFCWaJMNEBhDfig0zfRu+jul36/X3G4ENiSsbPENl18eslU71GL37uT9mFYWyZtJ2v2lI18oY+gqApjQb8cq9Wko2OCH9b1/dsr/Jgtd70PsH3z4l9/S+gMWi9gt+MBrBKxNrj1Jcw51eQ+UWE7yseHJOvhUvtnf3XNXL+oE=
  matrix:
    - TEST_SUITE=backend
    - TEST_SUITE=frontend
notifications:
  slack:
    secure: 
      N68DKTWA99zseRsJVB2aKNVxnXdQTD8sizWyKJqb1yFKXBRIqCz1zoOdPXLo/K2vanFc7DJ5LZqQjoEGf/vM/L7qV5Mws62jzFkTIMVnL7OyCt8yFlnKNf81zAD7cPowcLLZT/u6jpCXTODT2akHt0Q1YHIIdvTHQNAUMQ9JSpiLJQqt6kvfFsuq8W1fgOWuJQLRMw6PQMiCIby7FtuYNiXR3e4wmzrob4JJLZtBAd/EPlHGjPlpFBdiAfmVBR1tp6ibnUNgv0HMm7dxu9128spOLcgtBiqDRaUVFoF0InGoux1rRaIF/FuMtcupQjgHGQTz3FW6XbLygh6GH2Qc/+4tQS7ZTP42aeXGwt8UqQqIabMpaz1nAojxz4av8sw/CKZMwGwc9LbuDsBbnxLF6N2GtDHODy11rIuq5BxFYuaCncb+TCZaAUtsY94Ijp4zoRczpQbdLwJGbJm4v0G5qRXHDcvvTHufeQCdA69WZc156aOPY6J7Kliqxu6gXwtqZ/HHmRqxwJy7EtKNW5mImQP920ZfiFwWhuLbInWKzlo6TiuTlsWQJemvCfc+27ElOST98c9MnjRJ20v9fXn3kBit1bQxa/yPGe09S1bk8mhaJw3xwPP2vDx0zG+U9gGBAsi/tns3VxUqFEIUkWD6T9PVT6w6w7Zwh/+ZeeBI/5w=
