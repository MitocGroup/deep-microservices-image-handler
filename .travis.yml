language: node_js
sudo: required
node_js:
  - '6.10'
  - '7.8'
cache:
  edge: true
  directories:
    - $(npm root -g)
    - node_modules
    - deep_modules
    - $(npm config get prefix)/bin
branches:
  only:
    - master
    - dev
    - stage
    - test
before_install:
  - cp bin/test/package.json .
after_success:
  - npm run coverage
after_script:
  - npm run remove-coverage
env:
  global:
    - DEEP_NO_INTERACTION=1
    - E2E_TESTING=none
    - MAJOR_VERSIONS=master
    - secure: 
        IzfJEvFKDzR5lbRSo6lxFSv5q/99WTYlQTC4bMWYZRFNK1rkfsdd/qhSAUCUT+hkyapf1bp1aER9Z79Yi8ivtQpQRmSuiZ+yb+15YP1jCYuVjPFnthVOOrgsxJyjspYxgE5FzATra7KwlrkGL57kIeEqj1aR03qKT4vGd4IVygUa+9FEjEEhztgeJXaMX4/GOjui1yYhXm464/LaQNcUpiNE3h3KDPIvFX6Wvfvwmccu3JILXWAR46/t69tWhs36b5p/MpdoDlXceF6ZCbRWX35P8eqXUPoi84zimjgoCnpvVwaAEUiu+3N+EqwrSGVbQWjFxHBqz2i2BNCT6xfPmU7ijie5bpdAjOdtz/9TKmjZk+nup/rd7wgvIAAuUYnFRUYGmuAjJf/D/kCb4SKmF86JzSaSmWqy+E8EoZSd2tpl041l0cStOhws8LEKRHZPzXHJhnqWrfNw94qbwnk83hPim382TmG37bED9v+HUFDA7IaAREKgmXNwJyU5sEdCFPhlNmgX1TrAi2dw0IeGNtez2IeQ+R+AYg2D/cZW44lIjFGSKyufNnByd4Tzu6ONgFof68hspGlJpMhe8Hw4qP7b6rvy2iI9atB7mSVPTf/kUSmWfRP/y30Rak0x2TAy+fu7tpfyxAZPgG4D8N0VvL69cDQ4kM9+oDaqQcqsjJg=
    - secure: 
        x3ti6r6naaXj9+fOGYoctYiIK10noKhEOmuy+jlDRmvLWQlU4AP+vBV1xhOWniECr/L9rAerNGg0We3hhEzdiPEJt1Re49/n3Y+ohApIOLaKuYPe4SJNsXQCyKNj9hxl31WppkpApOhaxDR7PR2ZybroPHDVB1ne0HT+mZA5iseHao2cProEGPZIfRKLLL9AcWImhWL5H94X1OiYdcXGqJBuDEC7POqrmoMPlPfDioEXSLLEbgP2R4/5LKvgDtSANOf9yBvdSjUKS2am0DKBu5GwfIGdF5CHJnyCp2arqL1Z7rH7AoV7IXgi9iSo37pNtjUlkLcdKGugEzQZfSbSkwqQwwDszMEU21KvGnLJ5yGIJWEvHKcimBP5TdGjbD9ssCAZ1qyPalsh/QKNHjJZTrzy8VIOzOcS/wGEJRgFz3Wcg9LOLIDDXxfHbB67xCslqs/Zas2udp3LEpkP3sGCMhqSf2nScjY3UUsYSsZfX42cqJ26SZkQnrs/oszMak/RmY1jeoLjivMNxGe44s8MX9++XGP0+1PWxh1i0TAWtkJOP7QQItfJHJ5lyWJbXcajBFO8x3822cB5XTdigJIWzb+J0ITFhYf348k6+pDVbhCPWiFfC8djHbEW7CbnQkL0V3KBoqSKN4cY/XCX2hCVnMgzAqOV3Ms7YYGd87HSqHw=
    - secure: 
        1Lw+sV5DZSJWsG8GR2Fm5FDBWMLd09ILpkT+1m7xF2M2zsmvszj4Zdw+RWa8+FskIJFL7SWgMR7KNqqGyTCr1Nlk8GTPBsci8fgAnoBgMuLwyDqFgX1YjCzCA1Zmr2/7kXa54VjgyGXfwr3/in+3y6UNsAr2FKOtTGidSGiD9wUaCPX6CNvqJbXAEaQE4/k7vx204NXbgcjE3qdOzaEWCp0HuEUTscwCoYr5Y6eWqf7N4kq3XWJv49uz2QuCpTnsOAIcDKfv1HXMasU59iApIHqGMPEss82mjNhVj7MZA3kp/hgV6ZeWa6GT0vaCo3v7ggBEyhNR28LrESyUp4SdWfVA2KdiOVYzmWkjT1v9uU04SVzLxSc817cUNJe6CWF/4K8siZ4BQN/CZiNsB5nwTismcgPAKkyXSY40FYAoILG6gMPd1/lARW18fqMEzukxq2QGXYZpJy3KvZGndObWn+5S3s6qMwqczR94GwlbCkvBQcTUuFxCFqUAjlbkuO/AifoTygTQ0+C7bHmXrVRsRRDnT9ygAZA8WQc3AnGZtynpfB9osIIu240KbIXh+2UZZaiDnxzJuC7NOVggg9fSo37OY7d/Cb/berwHTug76bvfksrV2BZN1MxrWvf7/Yb/ihAzBApTfaq2qErKxceWoExqSuj3pCWgZi3WEB83ujI=
    - secure: 
        PXZWQsNOvTsHCIwyg70In/hXyZJOLE282lkPv61ZX8ukeuZZNyBUp/XLBQRhwy89pqs3EqAnzm0DoVXzIzTmKkjYEeqo74rho6Jd3On3Os4NS3q53lRpotjGE3Ds+gfqzFTwyo9YCg4QV4x9pSKcscoZ6ppcepw6U/TRsrXuYQH4sH02Z3GPQy7XJFrbwYzxTtu6QUyN+QfHyOKTAdXJlWKyYznPVcPyxNUUbs9ByhQd0kcDDGijjR0nZY0bZaAVO0/SA2An1FeztVVNzOgS0o1c7haWIjY3gPNs8q0/l/Z56zs0NhMspeFiSz6ZwbAy+wIAaafsboPVHflwZXlANR0oIqeXG6VNdKuyrWT1XF/LEW/EZzQ38ThWsco82S26vkJoFG7rDsQhCD8Prx9ZmuJsuQ7T+7AKdQLuV41AQyWJSQH31vZELMHoP9gKLpaa9jOenwbCjN01nH4QK1w4pPPFHHyoaLN54dY8oJAOKVE7OMsvKbvbDalSeLrpyzIfZaXv+eDqFMQIUpkgQ2VDN7V+p2suVw58TQKC+hXztrASygopjUAB5fycHRTP3nKptpGe51W5QLI8lKRJU9ctkG36ICWUY9Um8nVKqK/E9HsFic6BOsaUhYrUhz/bPs8Lv1vorFQ29mzqvWMbjX80f0sT/c8mo5ybBbGJax4lyuo=
    - secure: 
        kx9UPL9/ZIxHLqWfSvfv+MNTOlG+hHttsaeSIWNSD1Rmt+TyG+LcUYeD3/6pY6ehLmRh6uY5Bu2pWMsGn3g5W9zjkQ8CQ5rnsejdeFI5XOsfQiW1Ow10zmo70nIl4iIEJLiODlOCrG2R+TAB92XTH4IAPXzB3MtZDC8O20vCt4jsyr1fHmyFHmihlN5uFwpaev/wRQu3AAIbIvYbl5rN+AGcwblrLsEoLUfMbPca01ASNblbou0ZmHxryJ7EmsacZeiCPy5bS+CVtGNIMoFdX0Rt+EypOus9ICX3I4UVrwNgmnbeqkpLT57pUKMeJcNT+9fQufv+EePUApNSZBa4y+VVfKDzlf5PlV8ssTOPOw8q95bC7ry+Xi9St4fkL00wdKfOSjPGib8/PeEMYK2JPuMnYJNnoMUissPBTIiirpkpZVGxSOjAk/i8enRUA+wBJlbWsA7aKF3h92MfobPvtymqDrMO9eL3rjnGk/3VpC5XEv5zORGmHxCnC3uS1r1qn4HxFnlT5zMCXcmfcmLes7+QCykhgJj1RACN9WfD0BlBCTToo2WOblwfQWTZWAnF0b1v7EnMy6ELaLGrf9Vp/eSsjZTMxsYWT8hUO2U9jcjWXxN7PvfrKWalvtNs66+nf0/1E3hil78R9dQF3RwVZCXdK5+qMz3wSyOfRsT+djM=
    - secure: 
        aurFtGhP7kREPE8CIt2KWNgIZlb7NdC66V9b9YZagLt6Qhx2fQIObqLTLeTRN+y5H2jgHLVEi0VrBpnxY39uCoODfOTEXySPmxpPP5UyncJslJN3DZ13oHe0+AEnRcXqLvCZ1F6WYadSpk8ngqdYdNxzCiRpG9y1J9okvoUggvQV4DlJsQy/S6FXVmuMB5iFOj6Ex+GgBE5A3mHmUztzOqc58AnGJ6nghG9nsOBRdwq9GuBiDhiTfPcnuBHfNV3rh1Ql1kgfOZp9GHHG8NRv9NIHVn6NVCTlDpudS0oVd4TPxDGNvQfhzwheag2vDRrFAtKe8Vxq/jKWv64evJ+b7sFOG6OjM6yx8g4KJxTf3dPYUPuvZaE3a9v9Uuz/5wDHt85M0fweN/cmSsQrNLbiIW6mpLLULU1ImjXDMX/0PAW3+Asg/OxMDTOjVerRILKNkhq6n39Sm3UC2CO38TsFon7lvigGuv2/QQzkHV1VrJbsGuOwBg22WhR56VGP9r74cvTnLkwsxrBThGvwvaeBW814cqAHXDaGs3bf67btkNuVoZx6Zr27FeMB3kGhLrUGjxHNSqaXP6qPFQtQIft4H/9B3iPI3dyPv2wqzblGRPZprgnB9rbVkWjHPQxgyzHmFtdU8NiYZpU/itYkdHbqLdoHmsf+QmFVhKT+ekCcGN0=
    - secure: 
        OJo90v8tc8L3l+grLiFI1L2MTxRHaWt6JDW6nvTYq4mi4dZRpjU0URUEmfjIEW8JBtF3lwPVkV4CSnnXMcNM1oTv0dMefoU1JpE7uIOxHzm+eP38cKyMSjBdg9QhTxf25xiGUjBuiMoWd0NMckA09iHHeguYY/53rbCEXEUmljeHkvGlVqv+wlK2BuTYPtdttJPlW7bOub9THqhYgfbgCl9h237SAtKRfcB/HH919fbRwFVdg6wYWsbpkkFZ9sfIBX0B2DOwKfS8AH1PliXAoBSDZ85tb7EdG02bjZ0rn2GCTU/d/JVxkOayJDqNS+dpxuCb6UDowi1+Mq462erkrwj43eL6vpyOgXupYyDMQ4hrXu5OBAfPGtYpgybYWT+Q+kRO4F353TxbQSfhkya6cU+mDD8j78O6F0yPxTEWh0Caa0hfS8OnYEABG5IThRR1cSIwqdFnFGRLePoA1IBqDNF1wY7QB/7IUPXXlUoACG0VVzzbtsALQV06mD/btqliZrs79zEPg0oL6kCupdoOmY5qxAwxxxSTXegPwPOXa6fMrpU8DSRmpGKsWl1sKQNs0aMd+6DrRF2IsjlR21J+VthmwBtegTJi1ssV8AFo7Y6m/N7bkd+0rg5Pxl4EWsFn1dseRdFYhEiMf+ijvDW6jPClB600i3174KOr0LLm1EA=
    - secure: 
        Hku4Df6CIejF2fOFNBbwtlffOsSknoH8YytV3ERtWleD3wq8dHAEzWldDNpj4ygmGDXj8yo71OdWdHf2jVK0btNBx0L6vT8YEQobKmaJ5mtn+EC3tDCapcguQnHNAw3mG8nMN6zajvh1HKx0g73n9KkQM8Nx1Vt3PMPgFYwwZKmAi9KPjjeuolQeY+PXBrcAM4WL7a5DOqjM1Bh0F4v9a9rq+hBSPdo3AucUWZSWurwW5YGCU3ho8EBe/5cmWFK6rwbgzG6tB2kXjxPnInyyqmdZiRjKE1INhcstFxc7Xg4eFszLlrKO+5td8GRAc+LgN8QhZfTTX/eraI7cSNNslTD9mV+YW2R4XSYYqWCQTjM6ihnFAILPJSnRZ7r1HL4c5Y0gzjmwxvaJXjTyOBCdlaNnQyPifHr99HbRXy1FkJBCv4UbMwf2AtNWT68W5iozYYXu+3pmDC7g/puTVIl9D47mc6fU/VvFMmIh9PpEZsCec8Li/LA6U2emxezoWKHCUoWIFCWaJMNEBhDfig0zfRu+jul36/X3G4ENiSsbPENl18eslU71GL37uT9mFYWyZtJ2v2lI18oY+gqApjQb8cq9Wko2OCH9b1/dsr/Jgtd70PsH3z4l9/S+gMWi9gt+MBrBKxNrj1Jcw51eQ+UWE7yseHJOvhUvtnf3XNXL+oE=
  matrix:
    - TEST_SUITE=backend
    - TEST_SUITE=frontend
notifications:
  slack:
    secure: 
      N68DKTWA99zseRsJVB2aKNVxnXdQTD8sizWyKJqb1yFKXBRIqCz1zoOdPXLo/K2vanFc7DJ5LZqQjoEGf/vM/L7qV5Mws62jzFkTIMVnL7OyCt8yFlnKNf81zAD7cPowcLLZT/u6jpCXTODT2akHt0Q1YHIIdvTHQNAUMQ9JSpiLJQqt6kvfFsuq8W1fgOWuJQLRMw6PQMiCIby7FtuYNiXR3e4wmzrob4JJLZtBAd/EPlHGjPlpFBdiAfmVBR1tp6ibnUNgv0HMm7dxu9128spOLcgtBiqDRaUVFoF0InGoux1rRaIF/FuMtcupQjgHGQTz3FW6XbLygh6GH2Qc/+4tQS7ZTP42aeXGwt8UqQqIabMpaz1nAojxz4av8sw/CKZMwGwc9LbuDsBbnxLF6N2GtDHODy11rIuq5BxFYuaCncb+TCZaAUtsY94Ijp4zoRczpQbdLwJGbJm4v0G5qRXHDcvvTHufeQCdA69WZc156aOPY6J7Kliqxu6gXwtqZ/HHmRqxwJy7EtKNW5mImQP920ZfiFwWhuLbInWKzlo6TiuTlsWQJemvCfc+27ElOST98c9MnjRJ20v9fXn3kBit1bQxa/yPGe09S1bk8mhaJw3xwPP2vDx0zG+U9gGBAsi/tns3VxUqFEIUkWD6T9PVT6w6w7Zwh/+ZeeBI/5w=
